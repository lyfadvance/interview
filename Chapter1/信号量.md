# 信号量

## 信号量的定义

信号量包括一个元素和两个操作

元素: s，一个具有整数值的变量

操作:P,V

P,V的定义如下:

P:P(s)使得信号量s的值减1。如果值变为负数,则执行P操作的进程被阻塞,否则继续执行。

V:V(s)使得信号量s的值加1。如果值小于或者等于零，则被P操作阻塞的进程被解除阻塞。

从消费者，生产者模型的角度来看，信号量的物理意义就非常明显了。

首先注意,生产者和消费者可以不止一人。如果假定s的值为生产的商品个数,那么一次P操作相当于消费一个商品。

如果当前没商品，但是有多个用户(假如为n个用户)执行P操作，则此时s的值等于-n。说明所有用户需要n个商品，但是生产者此时没有商品生产出来。所以这n个用户应当阻塞等待生产者生产出来。当生产者生产出商品时，此时应当通知这n个用户有新的商品出来了。